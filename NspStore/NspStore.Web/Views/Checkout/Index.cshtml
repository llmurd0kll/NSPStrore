@model List<NspStore.Web.Services.CartItemDto>
@{
    ViewData["Title"] = "Оформление заказа";
    var addresses = (List<NspStore.Domain.Entities.Address>)ViewBag.Addresses;
}

<section class="section checkout">
    <div class="container">
        <h1 class="h1">Оформление заказа</h1>

        @if (!addresses.Any())
        {
            <p class="muted">У вас нет сохранённых адресов. Добавьте адрес перед оформлением.</p>
            <div class="section__actions">
                <a class="btn btn--primary" asp-controller="Addresses" asp-action="Index">
                    Перейти к адресам
                </a>
            </div>
        }
        else
        {
            <form method="post" asp-action="Place" class="form">
                @Html.AntiForgeryToken()

                <div class="form__row">
                    <label for="shippingAddressId" class="form__label">Адрес доставки</label>
                    <select id="shippingAddressId" class="form__select" name="shippingAddressId" required>
                        @foreach (var a in addresses)
                        {
                            <option value="@a.Id">@a.City, @a.Street @a.Apartment</option>
                        }
                    </select>
                </div>

                <div class="form__row">
                    <label for="comment" class="form__label">Комментарий</label>
                    <textarea id="comment" class="form__textarea" name="comment" rows="3"></textarea>
                </div>

                <div class="section__actions">
                    <button class="btn btn--primary" type="submit">Подтвердить заказ</button>
                </div>
            </form>
        }
    </div>
</section>
