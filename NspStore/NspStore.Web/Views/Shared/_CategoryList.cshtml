@model IReadOnlyList<NspStore.Application.ViewsModels.CategoryVm>

<div class="category-grid">
    <article class="card @(string.IsNullOrEmpty((string?)ViewData["ActiveCategory"]) ? "card--active" : "")">
        <a class="card__link" asp-controller="Catalog" asp-action="Index"
            aria-current="@(string.IsNullOrEmpty((string?)ViewData["ActiveCategory"]) ? "page" : null)">
            <div class="card__body">
                <h3 class="card__title"><span>Все категории</span></h3>
            </div>
        </a>
    </article>

    @if (!Model.Any())
    {
        <p class="muted">Категории пока не добавлены.</p>
    }
    else
    {
        @foreach (var cat in Model)
        {
            var isActive = (string?)ViewData["ActiveCategory"] == cat.Slug;
            <article class="card @(isActive ? "card--active" : "")">
                <a class="card__link" asp-controller="Catalog" asp-action="Index" asp-route-category="@cat.Slug"
                    asp-route-q="@ViewData["Q"]" aria-current="@(isActive ? "page" : null)">
                    <div class="card__body">
                        <h3 class="card__title"><span>@cat.Name</span></h3>
                    </div>
                </a>
            </article>
        }
    }
</div>