@model IEnumerable<NspStore.Application.ViewsModels.ProductImageVm>
@{
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
    ViewData["Title"] = "Изображения товара";
    var productId = ViewBag.ProductId as int? ?? 0;
    var productName = ViewBag.ProductName as string ?? "";
    }

<section class="section admin-product-images">
    <div class="container">
        <h1 class="h1">Изображения товара: @productName</h1>

        <div class="toolbar toolbar--between">
            <a class="btn btn--primary" asp-action="Create" asp-route-productId="@productId">Добавить изображение</a>
            <a class="btn btn--secondary" asp-area="Admin" asp-controller="Products" asp-action="Index">
                ← К товарам
            </a>
        </div>

        @if (!Model.Any())
            {
            <div class="alert alert--info">
                Изображений пока нет.
            </div>
            }
        else
            {
            <table class="table table--admin">
                <thead>
                    <tr>
                        <th class="ta-right">@Html.DisplayNameFor(m => m.First().Id)</th>
                        <th class="ta-left">@Html.DisplayNameFor(m => m.First().OriginalUrl)</th>
                        <th class="ta-left">@Html.DisplayNameFor(m => m.First().ThumbUrl)</th>
                        <th class="ta-left">@Html.DisplayNameFor(m => m.First().MediumUrl)</th>
                        <th class="ta-right">@Html.DisplayNameFor(m => m.First().SortOrder)</th>
                        <th class="ta-right">Действия</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var img in Model)
                        {
                        <tr>
                            <td class="ta-right">@img.Id</td>
                            <td>
                                <a href="@img.OriginalUrl" target="_blank">Оригинал</a>
                            </td>
                            <td>
                                <img src="@img.ThumbUrl" alt="thumb" style="max-height:50px;" />
                            </td>
                            <td>
                                <img src="@img.MediumUrl" alt="medium" style="max-height:100px;" />
                            </td>
                            <td class="ta-right">@img.SortOrder</td>
                            <td class="ta-right actions">
                                <a class="btn btn--sm" asp-action="Edit" asp-route-id="@img.Id">Редактировать</a>
                                <a class="btn btn--sm btn--danger" asp-action="Delete" asp-route-id="@img.Id">Удалить</a>
                            </td>
                        </tr>
                        }
                </tbody>
            </table>
            }
    </div>
</section>
