@model IEnumerable<NspStore.Domain.Entities.Product>
@{
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
    ViewData["Title"] = "Товары";
}

<section class="section admin-products">
    <div class="container">
        <h1 class="h1">Товары</h1>

        <div class="toolbar toolbar--between">
            <a class="btn btn--primary" asp-action="Create">Добавить товар</a>
        </div>

        <table class="table table--admin">
            <thead>
                <tr>
                    <th class="ta-left">Id</th>
                    <th class="ta-left">Название</th>
                    <th class="ta-left">SKU</th>
                    <th class="ta-left">Цена</th>
                    <th class="ta-left">Категория</th>
                    <th class="ta-right">Действия</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var p in Model)
                {
                    <tr>
                        <td>@p.Id</td>
                        <td>@p.Name</td>
                        <td>@p.Sku</td>
                        <td>@p.Price.ToString("0.00") BYN</td>
                        <td>@p.Category?.Name</td>
                        <td class="ta-right actions">
                            <a class="btn btn--sm" asp-action="Edit" asp-route-id="@p.Id">Редактировать</a>
                            <a class="btn btn--sm btn--danger" asp-action="Delete" asp-route-id="@p.Id">Удалить</a>
                            <a class="btn btn--sm"
                               asp-area="Admin"
                               asp-controller="ProductImages"
                               asp-action="Index"
                               asp-route-productId="@p.Id">
                                Изображения
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>

        @if (TempData["Error"] is string err)
        {
            <div class="alert alert--error">@err</div>
        }
        @if (TempData["Success"] is string ok)
        {
            <div class="alert alert--success">@ok</div>
        }
    </div>
</section>
